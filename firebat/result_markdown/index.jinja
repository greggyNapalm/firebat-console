{% extends "base.jinja" %}
{% set title = 'Results' %}
{% set header = 'Quick Results' %}
{% block content %}
      <div id="resp_time_chart" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
      <br>
      <div id="status_codes_chart" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
      <br>
      <div id="errno_chart" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
{% endblock content %}
{% block js %}
    <script src="./js/highcharts/highcharts.js"></script>
    <script src="./js/highcharts/modules/exporting.js"></script>
    <script src="./js/firebat/init.js"></script>
    <script src="./js/firebat/data_series.js"></script>

<script type="text/javascript">
$(function () {
    $(document).ready(function() {
        $.each(rps_series.data, function(idx, value) {
            value[0] = value[0]*1000  // make js time stamp from epoach
        });

        var resp_opts = {
            'title': 'Responce time percentiles',
            'yTitle': 'Responce time',
            'postfix': ' ms',
        };
        resp_percentiles_series.push(rps_series)
        base_chart('resp_time_chart', resp_percentiles_series, resp_perc_parser, resp_opts);

        var status_opts = {
            'title': 'HTTP status codes',
            'yTitle': 'Number',
            'postfix': '',
            'info_link': 'http://httpstatus.es/'
        };
        status_codes_series.push(rps_series)
        base_chart('status_codes_chart', status_codes_series, status_codes_parser, status_opts);

        var errno_opts = {
            'title': 'Errno from TCP socket',
            'yTitle': 'Number',
            'postfix': '',
            'info_link': 'https://gist.github.com/2413028'
        };
        errno_series.push(rps_series)
        base_chart('errno_chart', errno_series, errno_parser, errno_opts);
    });
});
</script>
{% endblock js %}
