===========
Инсталляция
===========

Для подготовки танка нам нужно выполнить 3 шага:

1. Установить Фантом.
---------------------
Установка Фантома описана `сдесь <http://phantom-doc-ru.readthedocs.org/en/latest/installation.html>`_.

2. Установить Firebat console.
------------------------------
Firebat console дистрибутируется как python модуль, рекомендую использовать изолированное окружение `vurtualev/virtualenvwrapper <http://docs.python-guide.org/en/latest/dev/virtualenvs/>`_ и воспользоваться утилитой pip:

::

    pip install -e git+git://github.com/greggyNapalm/firebat_console.git#egg=firebat-console

3. Настроить ОС.
----------------
Напомню, что Фантом работает исключительно на ОС GNU Linux, по-этому реч пойдёт именно о ней.
Задача настройки состоит в том, что бы подготовить танк к обработке десятков тысяч одновременных TCP сессий.
Если рассмотреть настройки по-умолчанию в популярных Linux дистрибутивах: RHEL/Ubuntu Server/Debian, то мы выясним, что нужно увеличить общий лимит в ОС на кол-во файловых дискрипторов т.к. они необходимы для работы с TCP сокетами, ulimit'ы пользователя под которым будет работать Фантом и настроить ядро ОС для более эффективной работы со стеком протоколов TCP/IP.

.. TODO: расписать более подробно


::

    # проверим лимиты на кол-во файловых дескрипторов для текущего пользователя
    $ ulimit -Hn
    65535
    $ ulimit -Sn
    65535

    # ощий для всех процессов в ОС лимит
    $ sysctl fs.file-max
    fs.file-max = 2339143


Настройки стека протоколов TCP/IP можно посмотреть `вот сдесь <https://gist.github.com/2282242>`_
