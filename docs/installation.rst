===========
Инсталляция
===========

Для подготовки танка нам нужно выполнить 3 шага:

1. Установить Фантом.
---------------------
Установка Фантома описана `здесь <http://phantom-doc-ru.readthedocs.org/en/latest/installation.html>`_.

2. Установить Firebat console.
------------------------------
Firebat console распространяется как python package `pypi <http://pypi.python.org/pypi/firebat-console>`_, рекомендую использовать изолированное окружение `vurtualev/virtualenvwrapper <http://docs.python-guide.org/en/latest/dev/virtualenvs/>`_ и утилитой pip:

::

    pip install firebat-console

3. Настроить ОС.
----------------
Напомню, что Фантом работает исключительно на ОС GNU Linux, поэтому речь пойдёт именно о ней.

Задача настройки состоит в том, чтобы подготовить танк к обработке десятков тысяч одновременных TCP сессий.
Если рассмотреть настройки по-умолчанию в популярных Linux дистрибутивах: RHEL/Ubuntu Server/Debian, то мы выясним, что нужно:

* увеличить общий лимит в ОС на кол-во файловых дискрипторов т.к. они необходимы для работы с TCP сокетами
* увеличить ulimit'ы пользователя под которым будет работать Фантом
* настроить ядро ОС для более эффективной работы со стеком протоколов TCP/IP.

.. TODO: расписать более подробно


::

    # проверим лимиты на кол-во файловых дескрипторов для текущего пользователя
    $ ulimit -Hn
    65535
    $ ulimit -Sn
    65535

    # ощий для всех процессов в ОС лимит
    $ sysctl fs.file-max
    fs.file-max = 2339143


Настройки стека протоколов TCP/IP можно посмотреть `вот здесь <https://gist.github.com/2282242>`_
